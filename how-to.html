<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How-To · Tischreservierung</title>
    <link rel="icon" href="img/SKV-Wappen.jpg">
    <style>
        :root {
            color-scheme: light;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        }
        body {
            margin: 0;
            padding: 0;
            background: #f8fafc;
            color: #0f172a;
            line-height: 1.6;
        }
        header {
            background: royalblue;
            color: #fff;
            padding: 32px 24px 24px;
        }
        header h1 {
            margin: 0 0 12px;
            font-size: clamp(28px, 3vw, 42px);
        }
        header p {
            margin: 0;
            max-width: 720px;
        }
        main {
            max-width: 960px;
            margin: 0 auto;
            padding: 32px 24px 64px;
        }
        nav {
            background: #fff;
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.12);
            margin-bottom: 32px;
        }
        nav h2 {
            margin-top: 0;
            font-size: 20px;
        }
        nav ul {
            margin: 0;
            padding-left: 20px;
            columns: 2;
            gap: 24px;
            list-style: none;
        }
        nav li::before {
            content: "›";
            color: royalblue;
            margin-right: 6px;
        }
        nav li {
            break-inside: avoid;
            margin-bottom: 8px;
        }
        nav a {
            color: royalblue;
            text-decoration: none;
        }
        nav a:hover,
        nav a:focus {
            text-decoration: underline;
        }
        section {
            margin-bottom: 48px;
        }
        section h2 {
            font-size: 26px;
            margin-bottom: 16px;
        }
        section h3 {
            font-size: 20px;
            margin-top: 28px;
        }
        .tip {
            background: #e0f2fe;
            border-left: 4px solid #0284c7;
            padding: 12px 16px;
            border-radius: 6px;
            margin: 16px 0;
        }
        .steps {
            counter-reset: step;
            list-style: none;
            padding-left: 0;
        }
        .steps li {
            counter-increment: step;
            margin-bottom: 18px;
            position: relative;
            padding-left: 42px;
        }
        .steps li::before {
            content: counter(step);
            position: absolute;
            top: 0;
            left: 0;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: royalblue;
            color: #fff;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }
        th, td {
            border: 1px solid #cbd5f5;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background: #e0e7ff;
        }
        footer {
            border-top: 1px solid #cbd5f5;
            padding: 24px;
            text-align: center;
            color: #334155;
        }
        @media (max-width: 720px) {
            nav ul {
                columns: 1;
            }
            .steps li {
                padding-left: 36px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Tischreservierung · How-To</h1>
        <p>Diese Seite beschreibt Schritt für Schritt, wie du das Reservierungstool des Sandersdorfer Karnevalsvereins im Arbeitsalltag einsetzt. Alle Funktionen aus dem Hauptwerkzeug sind dokumentiert – von der Veranstaltungsanlage über den Sitzplan bis zu Exporten, Synchronisationen und Rechnungen.</p>
    </header>
    <main>
        <nav aria-label="Inhaltsverzeichnis">
            <h2>Direkt zu …</h2>
            <ul>
                <li><a href="#grundlagen">Grundlagen &amp; Aufbau</a></li>
                <li><a href="#start">Erststart &amp; Veranstaltungen</a></li>
                <li><a href="#sitzplan">Sitzplan &amp; Tischauswahl</a></li>
                <li><a href="#reservierungen">Reservierungen erfassen</a></li>
                <li><a href="#verwaltung">Bestandsverwaltung &amp; Aktionen</a></li>
                <li><a href="#suche">Suche &amp; Auswertungen</a></li>
                <li><a href="#sync">Synchronisation &amp; Zusatzansichten</a></li>
                <li><a href="#rechnungen">Rechnungen &amp; Kundendisplay</a></li>
                <li><a href="#tipps">Tipps &amp; Troubleshooting</a></li>
            </ul>
        </nav>

        <section id="grundlagen">
            <h2>Grundlagen &amp; Aufbau</h2>
            <p>Das Tool besteht aus einem Kopfbereich mit den wichtigsten Schaltern, einem flexiblen Einstellungsmenü (öffnet sich über das Zahnrad-Symbol) und dem Arbeitsbereich mit Tischliste und Reservierungstabelle. Links im Overlay können neue Veranstaltungen angelegt oder bestehende Daten geladen werden.</p>
            <div class="tip">
                <strong>Barrierefreiheit:</strong> Sämtliche klickbaren Elemente im Tischbereich lassen sich auch per Tastatur steuern. Mit <kbd>Tab</kbd> navigierst du durch die Schaltflächen, <kbd>Enter</kbd> oder <kbd>Leertaste</kbd> wählen Tabellenzeilen und Tischkacheln aus.
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Bereich</th>
                        <th>Funktion</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>App-Header</td>
                        <td>Veranstaltungstabs, Warenkorb, Schnellzugriffe auf Zusatzansichten</td>
                    </tr>
                    <tr>
                        <td>Einstellungsmenü</td>
                        <td>Eventverwaltung, Import/Export, Kartenpreis, Cache-Optionen</td>
                    </tr>
                    <tr>
                        <td>Arbeitsbereich</td>
                        <td>Tischauswahl, Reservierungstabelle, Aktionsknöpfe</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="start">
            <h2>Erststart &amp; Veranstaltungen</h2>
            <h3>Erste Schritte</h3>
            <ol class="steps">
                <li>Öffne <code>index.html</code> im Browser oder starte einen lokalen Webserver (z. B. <code>npx serve</code> im Projektverzeichnis).</li>
                <li>Wähle im Startdialog eine Option: neue Veranstaltung anlegen, Daten importieren oder eine gecachte Veranstaltung fortsetzen.</li>
                <li>Vergib bei der Neuanlage Datum &amp; Veranstaltungstyp. Der Dateiname wird automatisch vorgeschlagen.</li>
            </ol>
            <h3>Tab-Verwaltung</h3>
            <ul>
                <li>Mit dem Plus-Symbol im Einstellungsmenü öffnest du das Aktionsmenü für neue Tabs.</li>
                <li>Bestehende Veranstaltungen lassen sich per Doppelklick auf den Tab oder über den Button <em>Namen ändern</em> umbenennen.</li>
                <li>Über <em>Veranstaltung entfernen</em> löschst du die aktive Veranstaltung nach Bestätigung.</li>
                <li>Die Buttons <em>Aus Cache laden</em> und <em>Veranstaltung aus Cache entfernen</em> arbeiten mit dem lokalen Browser-Speicher. Ideal für Unterbrechungen.</li>
            </ul>
        </section>

        <section id="sitzplan">
            <h2>Sitzplan &amp; Tischauswahl</h2>
            <p>Die linke Tischübersicht listet alle verfügbaren Tische inklusive verbleibender Plätze. Ein Klick (oder <kbd>Enter</kbd> / <kbd>Leertaste</kbd>) markiert den Tisch und zeigt rechts alle Reservierungen.</p>
            <div class="tip">
                <strong>Schneller Wechsel:</strong> Das Dropdown <em>Bitte Tisch auswählen</em> synchronisiert sich mit den Tischkacheln. Änderungen lösen automatisch ein UI-Update aus.</div>
            <h3>Tische anpassen</h3>
            <ul>
                <li><strong>Sitzplatzanzahl ändern:</strong> Öffnet einen Dialog, um die Kapazität eines Tisches anzupassen.</li>
                <li><strong>Tisch hinzufügen / entfernen:</strong> Buttons befinden sich in der Tischliste und respektieren die Reihenfolge des Saalplans.</li>
                <li><strong>Kartenpreis bearbeiten:</strong> Über das Stiftsymbol im Einstellungsmenü definierst du den aktuellen Verkaufspreis.</li>
            </ul>
        </section>

        <section id="reservierungen">
            <h2>Reservierungen erfassen</h2>
            <h3>Standard-Buchung</h3>
            <ol class="steps">
                <li>Klicke auf <em>Reservierung berechnen</em>.</li>
                <li>Gib Name, Kartenanzahl und optional einen Tischwunsch an.</li>
                <li>Das System sucht automatisch passende freie Plätze, verteilt ggf. auf mehrere Tische, und markiert die betroffenen Tische.</li>
                <li>Im Anschluss erscheint eine Zusammenfassung sowie die aktualisierte Reservierungsliste.</li>
            </ol>
            <h3>Nachträgliche Bearbeitung</h3>
            <ul>
                <li><strong>Bearbeiten:</strong> Über das Stiftsymbol in der Tabelle änderst du Name, Kartenanzahl oder Notiz.</li>
                <li><strong>Notiz hinzufügen:</strong> Das Notizsymbol speichert zusätzliche Hinweise (z. B. Allergien, Zahlungsstatus).</li>
                <li><strong>Verschieben / Tauschen:</strong> Der Pfeil-Button öffnet ein Modal, um Reservierungen auf andere Tische zu verschieben oder zu tauschen. Für den Tausch werden beide Seiten miteinander abgeglichen.</li>
                <li><strong>Löschen:</strong> Das Papierkorb-Symbol entfernt einzelne Einträge nach Bestätigung.</li>
            </ul>
            <p>Alle Aktionen aktualisieren sofort den lokalen Datenbestand und markieren die Veranstaltung als „dirty“, wodurch Exporte und Synchronisationen erkennen, dass neue Daten vorliegen.</p>
        </section>

        <section id="verwaltung">
            <h2>Bestandsverwaltung &amp; Aktionen</h2>
            <p>Im Einstellungsmenü findest du weitere Werkzeuge:</p>
            <ul>
                <li><strong>Sitzplätze exportieren (JSON):</strong> Speichert den aktuellen Saalplan.</li>
                <li><strong>Sitzplätze importieren:</strong> Lädt zuvor exportierte Tischkonfigurationen.</li>
                <li><strong>Reservierungen exportieren (JSON):</strong> Erstellt eine detaillierte Reservierungsliste inklusive Metadaten.</li>
                <li><strong>Reservierungen importieren:</strong> Fügt Buchungen aus einer JSON-Datei hinzu – ideal für Datensicherungen.</li>
                <li><strong>Cache entfernen:</strong> Löscht Browser-Zwischenspeicher für die aktive Veranstaltung.</li>
            </ul>
            <div class="tip">
                <strong>Dateinamenskonvention:</strong> Der vorgeschlagene Name folgt dem Muster <code>YYYY-MM-DD_<em>Veranstaltungstyp</em>.json</code>. Das erleichtert spätere Zuordnungen.</div>
        </section>

        <section id="suche">
            <h2>Suche &amp; Auswertungen</h2>
            <ul>
                <li><strong>Buchungen suchen:</strong> Öffnet eine Suchmaske, in der du nach Namen, Tischnummern, Zeitstempeln oder Notizen filtern kannst.</li>
                <li><strong>Reservierungen exportieren:</strong> Die JSON-Datei enthält neben jeder Buchung auch die eindeutige Buchungs-ID – wichtig für spätere Auswertungen.</li>
                <li><strong>Split-Informationen:</strong> Reservierungen, die auf mehrere Tische verteilt werden, enthalten automatisch eine Notiz „Tischwunsch“ und die Aufteilung wird in der internen Kommunikation gespeichert.</li>
            </ul>
        </section>

        <section id="sync">
            <h2>Synchronisation &amp; Zusatzansichten</h2>
            <p>Das System nutzt <code>BroadcastChannel</code> und einen lokalen Speicher-Fallback, um Daten mit weiteren Browser-Tabs zu teilen. Die folgenden Buttons öffnen Spezialansichten in neuen Tabs. Halte diese Seiten parallel offen, um Live-Updates zu erhalten.</p>
            <ul>
                <li><strong>Internen Saalplan öffnen:</strong> Detailansicht für das Team mit Farbmarkierungen, verbleibenden Plätzen und Status-Updates.</li>
                <li><strong>Externen Saalplan öffnen:</strong> Öffentlich nutzbare Übersicht, ideal für den Ticketverkauf am Einlass.</li>
                <li><strong>Kundendisplay öffnen:</strong> Kundenansicht mit Bestellfortschritt. Der Button <em>Nächster Kunde</em> im Hauptfenster sendet einen Reset an dieses Display.</li>
            </ul>
            <div class="tip">
                <strong>Synchronität:</strong> Solange alle Tabs im selben Browser laufen, werden Änderungen nahezu in Echtzeit gespiegelt. Der LocalStorage-Fallback greift automatisch, wenn <code>BroadcastChannel</code> nicht verfügbar ist.</div>
        </section>

        <section id="rechnungen">
            <h2>Rechnungen &amp; Kundendisplay</h2>
            <ul>
                <li><strong>Rechnungen als ZIP herunterladen:</strong> Erstellt eine Zip-Datei aller offenen Rechnungen. Die Dateinamen enthalten die Buchungs-ID.</li>
                <li><strong>Payment-Flow:</strong> Nach Abschluss einer Reservierung erscheint der Dialog „Verkauf abgeschlossen“ mit direktem Link zur Rechnung und dem Button <em>Nächster Kunde</em>.</li>
                <li><strong>Kundendisplay:</strong> Aktualisiert sich automatisch, wenn neue Reservierungen oder Zahlungen verbucht werden.</li>
            </ul>
        </section>

        <section id="tipps">
            <h2>Tipps &amp; Troubleshooting</h2>
            <ul>
                <li><strong>Browser-Cache leeren:</strong> Bei Anzeigeproblemen die Funktion „Veranstaltung aus Cache entfernen“ nutzen oder den Browser-Cache komplett leeren.</li>
                <li><strong>Backup-Strategie:</strong> Nach jedem Verkaufstag sowohl Sitzplätze als auch Reservierungen exportieren. So kannst du den Stand jederzeit rekonstruieren.</li>
                <li><strong>Fehlende BroadcastChannel-Unterstützung:</strong> Ältere Browser synchronisieren ausschließlich über LocalStorage. In diesem Fall Tabs kurz neu laden.</li>
                <li><strong>Importfehler:</strong> Prüfe, ob die JSON-Datei zum richtigen Veranstaltungstyp passt und keine manuellen Änderungen enthält.</li>
            </ul>
        </section>
    </main>
    <footer>
        Stand: <time datetime="2024-06-01">Juni 2024</time> · Für Rückfragen bitte an das Entwicklerteam oder den Technikverantwortlichen wenden.
    </footer>
</body>
</html>
