<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <!--<link rel="stylesheet" href="modal.css">-->
    <script type="module" src="js/main.js"></script>
    <title>Sandersdorfer Karnevalsverein e.V. - Tischreservierung</title>
</head>
<body>

<div class="event-start-overlay" id="event-start-overlay" hidden>
    <div class="event-start-overlay__dialog" role="dialog" aria-modal="true" aria-labelledby="event-start-title">
        <h2 id="event-start-title">Veranstaltung auswählen</h2>
        <p>Bitte wählen Sie, wie Sie fortfahren möchten.</p>
        <div class="event-start-overlay__actions">
            <button type="button" class="event-start-overlay__btn event-start-overlay__btn--primary" id="event-start-new">Neue Veranstaltung anlegen</button>
            <button type="button" class="event-start-overlay__btn" id="event-start-import">Veranstaltung importieren</button>
            <button type="button" class="event-start-overlay__btn" id="event-start-cache">Aus Cache laden</button>
        </div>
    </div>
</div>

<div class="event-name-dialog" id="event-name-dialog" hidden>
    <div class="event-name-dialog__dialog" role="dialog" aria-modal="true" aria-labelledby="event-name-title">
        <form class="event-name-dialog__form" id="event-name-form">
            <h2 class="event-name-dialog__title" id="event-name-title">Veranstaltung benennen</h2>
            <p class="event-name-dialog__description" id="event-name-description">
                Bitte wählen Sie das Veranstaltungsdatum und die Art der Veranstaltung aus.
            </p>
            <div class="event-name-dialog__field">
                <label class="event-name-dialog__label" for="event-name-date">Datum</label>
                <input class="event-name-dialog__input" type="date" id="event-name-date" name="date" required>
            </div>
            <div class="event-name-dialog__field">
                <label class="event-name-dialog__label" for="event-name-type">Art der Veranstaltung</label>
                <select class="event-name-dialog__input" id="event-name-type" name="type" required>
                    <option value="Lumpenball">Lumpenball</option>
                    <option value="Fasching">Fasching</option>
                    <option value="Narrengipfel">Narrengipfel</option>
                    <option value="Sonstiges">Sonstiges</option>
                </select>
            </div>
            <p class="event-name-dialog__preview">Dateiname: <strong id="event-name-preview">—</strong></p>
            <div class="event-name-dialog__actions">
                <button type="button" class="event-name-dialog__btn" id="event-name-cancel">Abbrechen</button>
                <button type="submit" class="event-name-dialog__btn event-name-dialog__btn--primary" id="event-name-submit">Speichern</button>
            </div>
        </form>
    </div>
</div>

<div class="container">
    <header class="app-header">
        <button class="app-header__settings-btn" id="settings-toggle" type="button" aria-label="Einstellungen öffnen">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
                <path d="M19.14 12.94a7.14 7.14 0 0 0 .06-.94 7.14 7.14 0 0 0-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a6.83 6.83 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 14.42 2h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.59.24-1.14.56-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.18 8.02a.5.5 0 0 0 .12.64l2.03 1.58a7.14 7.14 0 0 0-.06.94c0 .32.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.49.38 1.04.7 1.63.94l.36 2.54a.5.5 0 0 0 .5.42h3.84a.5.5 0 0 0 .5-.42l.36-2.54c.59-.24 1.14-.56 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58ZM12 15.25A3.25 3.25 0 1 1 12 8.75a3.25 3.25 0 0 1 0 6.5Z"></path>
            </svg>
        </button>
        <div class="app-header__center">
            <div class="app-header__titles">
                <h1>Sandersdorfer Karnevalsverein e.V.</h1>
                <h2>Tischreservierung</h2>
            </div>
            <div class="event-tabs app-header__event-tabs" id="header-event-tabs" role="tablist" aria-label="Veranstaltungen"></div>
        </div>
        <button class="app-header__cart-btn" id="cart-toggle" type="button" aria-label="Warenkorb öffnen" title="Warenkorb öffnen">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="19" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61H19a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span class="app-header__cart-badge" id="cart-badge" hidden>0</span>
        </button>
    </header>

    <aside class="settings-panel" id="settings-panel" aria-hidden="true" tabindex="-1">
        <div class="settings-panel__header">
            <div class="settings-panel__header-top">
                <h3>Einstellungen</h3>
                <button type="button" class="settings-panel__close" id="settings-close" aria-label="Einstellungen schließen">×</button>
            </div>
            <div class="settings-panel__events">
                <div class="event-tabs" id="event-tabs" role="tablist" aria-label="Veranstaltungen"></div>
                <div class="event-tabs__actions">
                    <button type="button" class="event-tabs__remove-btn" id="event-remove-btn" aria-label="Veranstaltung entfernen" disabled>&minus;</button>
                    <button type="button" class="event-tabs__add-btn" id="event-tab-add" aria-label="Veranstaltung hinzufügen" aria-haspopup="true" aria-expanded="false">+</button>
                    <div class="event-tabs__menu" id="event-add-menu" role="menu" hidden>
                        <button type="button" class="event-tabs__menu-item" id="event-add-new" role="menuitem">Neue Veranstaltung anlegen</button>
                        <button type="button" class="event-tabs__menu-item" id="event-add-import" role="menuitem">Veranstaltung importieren</button>
                        <button type="button" class="event-tabs__menu-item" id="event-add-cache" role="menuitem">Aus Cache laden</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="settings-panel__section">
            <h4>Aktionen</h4>
            <div class="settings-panel__actions">
                <button id="btn-export-seats" type="button">Sitzplätze exportieren (JSON)</button>
                <button id="btn-import-seats" type="button">Sitzplätze importieren</button>
                <button id="btn-export-res" type="button">Reservierungen exportieren (JSON)</button>
                <button id="btn-import-res" type="button">Reservierungen importieren</button>
                <button id="btn-cache-remove" type="button">Veranstaltung aus Cache entfernen</button>
            </div>
        </div>
        <div class="settings-panel__section">
            <h4>Werte</h4>
            <div class="settings-panel__value">
                <div class="settings-panel__value-label">Kartenpreis</div>
                <div class="settings-panel__value-display">
                    <span id="card-price-value" data-price="19.5">19,50 €</span>
                    <button type="button" class="settings-panel__edit" id="card-price-edit" aria-label="Kartenpreis bearbeiten">
                        <svg aria-hidden="true" focusable="false" viewBox="0 0 20 20">
                            <path d="M13.586 2.586a2 2 0 0 1 2.828 2.828l-9.9 9.9a1 1 0 0 1-.464.26l-3.357.746a.5.5 0 0 1-.607-.607l.746-3.357a1 1 0 0 1 .26-.464l9.9-9.9ZM12.172 4 4 12.172V14h1.828L14 5.828 12.172 4Z"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="event-name-control" id="event-name-control">
                <div class="event-name-control__label">Veranstaltungsname</div>
                <div class="event-name-control__body">
                    <span class="event-name-control__value" id="event-name-display">—</span>
                    <button type="button" class="event-name-control__edit" id="event-rename-btn" disabled>Namen ändern</button>
                </div>
            </div>
            <div class="event-name-control" id="event-display-name-control">
                <div class="event-name-control__label">Anzeigename (extern)</div>
                <div class="event-name-control__body">
                    <span class="event-name-control__value" id="event-display-name">—</span>
                    <button type="button" class="event-name-control__edit" id="event-display-name-btn" disabled>Anzeigenamen ändern</button>
                </div>
            </div>
        </div>
    </aside>
    <div class="settings-panel-backdrop" id="settings-backdrop" hidden></div>

    <p></p>

    <div class="content">
        <div id="tischAusgabe"></div>
        <div id="reservationview">

            <div class="table-wrap">
                <table class="table">
                    <colgroup>
                        <col style="width:25%">
                        <col style="width:10%">
                        <col style="width:25%">
                        <col style="width:40%">
                    </colgroup>

                    <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Karten</th>
                        <th scope="col">Notizen</th>
                        <th scope="col">Aktionen</th>
                    </tr>
                    </thead>

                    <tbody>
                    <!-- Wird generiert -->
                    <!-- Beispiel:
                    <tr>
                      <td>Max Mustermann</td>
                      <td>2</td>
                      <td>Weiter Karten an Tisch 5</td>
                      <td class="actions">
                        <button class="btn">Bearbeiten</button>
                        <button class="btn btn--ghost">Löschen</button>
                      </td>
                    </tr>
                    -->
                    </tbody>

                    <tfoot>
                    <tr>
                        <!-- Footer über volle Breite -->
                        <td colspan="4">
                            Verfügbare Karten an dem Tisch: <strong id="available-cards">-</strong>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>


    <button id="btn-book" type="button">Reservierung berechnen</button>
    <button id="btn-change-seats" type="button">Sitzplatzanzahl ändern</button>
    <button id="btn-search-bookings">Buchungen suchen</button>
    <button id="btn-open-internal-plan" type="button">Internen Saalplan öffnen</button>
    <button id="btn-open-external-plan" type="button">Externen Saalplan öffnen</button>
</div>

<!-- Modal: Verschieben / Tauschen -->
<div id="moveModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="moveModalTitle">
    <div class="modal__backdrop"></div>
    <div class="modal__dialog">
        <header class="modal__header">
            <h3 id="moveModalTitle">Reservierung verschieben / tauschen</h3>
            <button type="button" class="modal__close" id="moveModalClose" aria-label="Schließen">×</button>
        </header>

        <div class="modal__body">
            <div class="modal__controls">
                <label><input type="radio" name="moveMode" value="move" checked> Verschieben</label>
                <label style="margin-left:16px;"><input type="radio" name="moveMode" value="swap"> Tauschen</label>
                <span id="mm-hint" class="mm-hint">Modus „Verschieben“: Ziel-Tisch braucht genügend freie Plätze.</span>
            </div>

            <div class="modal__grid">
                <!-- Linke Spalte: Quelle -->
                <section class="modal__col">
                    <h4>Quelle: Tisch <span id="mm-source-nr">—</span></h4>
                    <table class="table table--compact" id="mm-source-table">
                        <thead>
                        <tr>
                            <th>Auswahl</th>
                            <th>Name</th>
                            <th>Karten</th>
                            <th>Notizen</th>
                            <th style="min-width:130px;">Zu verschiebende Karten</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </section>

                <!-- Rechte Spalte: Ziel -->
                <section class="modal__col">
                    <h4>
                        Ziel:
                        <select id="mm-target-select" style="margin-left:6px;"></select>
                    </h4>
                    <table class="table table--compact" id="mm-target-table">
                        <thead>
                        <tr>
                            <th>Auswahl</th>
                            <th>Name</th>
                            <th>Karten</th>
                            <th>Notizen</th>
                            <th style="min-width:130px;">Zu verschiebende Karten</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </section>
            </div>
        </div>

        <footer class="modal__footer">
            <div class="modal__totals">
                <span>Links → Rechts: <strong id="mm-total-LR">0</strong></span>
                <span class="swap-only"> | Rechts → Links: <strong id="mm-total-RL">0</strong></span>
            </div>
            <div class="modal__actions">
                <button class="btn btn--ghost" id="moveModalCancel" type="button">Abbrechen</button>
                <button class="btn" id="moveModalApply" type="button">Ausführen</button>
            </div>
        </footer>
    </div>
</div>

</body>
</html>
