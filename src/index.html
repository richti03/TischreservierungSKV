<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="modal.css">
    <script type="module" src="js/main.js"></script>
    <title>Sandersdorfer Karnevalsverein e.V. - Tischreservierung</title>
</head>
<body>

<div class="container">
    <header>
        <h1>Sandersdorfer Karnevalsverein e.V.</h1>
        <h2>Tischreservierung</h2>
    </header>

    <p id="tischInfo">Hallo, aktuell haben unsere Tische folgende Sitzplätze:</p>

    <div class="content">
        <div id="tischAusgabe"></div>
        <div id="reservationview">
            <label for="table-select">Tisch:</label>
            <select id="table-select">
                <option selected disabled>Bitte Tisch auswählen.</option>
            </select>
            <button id="btn-add-table" type="button">Tisch hinzufügen</button>
            <button id="btn-remove-table" type="button">Tisch entfernen</button>

            <div class="table-wrap">
                <table class="table">
                    <colgroup>
                        <col style="width:40%">
                        <col style="width:5%">
                        <col style="width:40%">
                        <col style="width:15%">
                    </colgroup>

                    <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Karten</th>
                        <th scope="col">Notizen</th>
                        <th scope="col">Aktionen</th>
                    </tr>
                    </thead>

                    <tbody>
                    <!-- Wird generiert -->
                    <!-- Beispiel:
                    <tr>
                      <td>Max Mustermann</td>
                      <td>2</td>
                      <td>Weiter Karten an Tisch 5</td>
                      <td class="actions">
                        <button class="btn">Bearbeiten</button>
                        <button class="btn btn--ghost">Löschen</button>
                      </td>
                    </tr>
                    -->
                    </tbody>

                    <tfoot>
                    <tr>
                        <!-- Footer über volle Breite -->
                        <td colspan="4">
                            Verfügbare Karten an dem Tisch: <strong id="available-cards">-</strong>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>


    <button id="btn-book" type="button">Reservierung berechnen</button>
    <button id="btn-change-seats" type="button">Sitzplatzanzahl ändern</button>
    <button id="btn-export-seats" type="button">Sitzplätze exportieren (JSON)</button>
    <button id="btn-import-seats" type="button">Sitzplätze importieren</button>
    <button id="btn-export-res" type="button">Reservierungen exportieren (JSON)</button>
    <button id="btn-import-res" type="button">Reservierungen importieren</button>
    <button id="btn-search-bookings">Buchungen suchen</button>
</div>

<!-- Modal: Verschieben / Tauschen -->
<div id="moveModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="moveModalTitle">
    <div class="modal__backdrop"></div>
    <div class="modal__dialog">
        <header class="modal__header">
            <h3 id="moveModalTitle">Reservierung verschieben / tauschen</h3>
            <button type="button" class="modal__close" id="moveModalClose" aria-label="Schließen">×</button>
        </header>

        <div class="modal__body">
            <div class="modal__controls">
                <label><input type="radio" name="moveMode" value="move" checked> Verschieben</label>
                <label style="margin-left:16px;"><input type="radio" name="moveMode" value="swap"> Tauschen</label>
                <span id="mm-hint" class="mm-hint">Modus „Verschieben“: Ziel-Tisch braucht genügend freie Plätze.</span>
            </div>

            <div class="modal__grid">
                <!-- Linke Spalte: Quelle -->
                <section class="modal__col">
                    <h4>Quelle: Tisch <span id="mm-source-nr">—</span></h4>
                    <table class="table table--compact" id="mm-source-table">
                        <thead>
                        <tr>
                            <th>Auswahl</th>
                            <th>Name</th>
                            <th>Karten</th>
                            <th>Notizen</th>
                            <th style="min-width:130px;">Zu verschiebende Karten</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </section>

                <!-- Rechte Spalte: Ziel -->
                <section class="modal__col">
                    <h4>
                        Ziel:
                        <select id="mm-target-select" style="margin-left:6px;"></select>
                    </h4>
                    <table class="table table--compact" id="mm-target-table">
                        <thead>
                        <tr>
                            <th>Auswahl</th>
                            <th>Name</th>
                            <th>Karten</th>
                            <th>Notizen</th>
                            <th style="min-width:130px;">Zu verschiebende Karten</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </section>
            </div>
        </div>

        <footer class="modal__footer">
            <div class="modal__totals">
                <span>Links → Rechts: <strong id="mm-total-LR">0</strong></span>
                <span class="swap-only"> | Rechts → Links: <strong id="mm-total-RL">0</strong></span>
            </div>
            <div class="modal__actions">
                <button class="btn btn--ghost" id="moveModalCancel" type="button">Abbrechen</button>
                <button class="btn" id="moveModalApply" type="button">Ausführen</button>
            </div>
        </footer>
    </div>
</div>

</body>
</html>
